<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Token Fragment</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-link { display: block; margin: 10px 0; padding: 10px; background: #f0f0f0; text-decoration: none; border-radius: 5px; }
        .test-link:hover { background: #e0e0e0; }
        .code { background: #f5f5f5; padding: 10px; border-radius: 5px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>🔍 Debug de Token Fragment</h1>
    <p>Esta página te ayuda a probar diferentes formatos de token en el fragment de la URL.</p>
    
    <h2>📋 Instrucciones:</h2>
    <ol>
        <li>Abre la consola del navegador (F12)</li>
        <li>Haz clic en uno de los enlaces de prueba</li>
        <li>Observa los logs detallados en la consola</li>
        <li>Verifica que el email se extraiga correctamente</li>
    </ol>
    
    <h2>🧪 URLs de Prueba:</h2>
    
    <h3>Con access_token:</h3>
    <a href="http://localhost:5173/#access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzdWFyaW9AZWplbXBsby5jb20iLCJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IlVzdWFyaW8gZGUgUHJ1ZWJhIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c" class="test-link">
        🔗 access_token=JWT_TOKEN
    </a>
    
    <h3>Con id_token:</h3>
    <a href="http://localhost:5173/#id_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzdWFyaW9AZWplbXBsby5jb20iLCJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IlVzdWFyaW8gZGUgUHJ1ZWJhIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c" class="test-link">
        🔗 id_token=JWT_TOKEN
    </a>
    
    <h3>Con token:</h3>
    <a href="http://localhost:5173/#token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzdWFyaW9AZWplbXBsby5jb20iLCJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IlVzdWFyaW8gZGUgUHJ1ZWJhIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c" class="test-link">
        🔗 token=JWT_TOKEN
    </a>
    
    <h3>Con jwt:</h3>
    <a href="http://localhost:5173/#jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzdWFyaW9AZWplbXBsby5jb20iLCJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IlVzdWFyaW8gZGUgUHJ1ZWJhIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c" class="test-link">
        🔗 jwt=JWT_TOKEN
    </a>
    
    <h3>Sin token (para probar error):</h3>
    <a href="http://localhost:5173/" class="test-link">
        🔗 Sin fragment (debería mostrar error)
    </a>
    
    <h2>🔍 Token JWT de Prueba:</h2>
    <div class="code">
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InVzdWFyaW9AZWplbXBsby5jb20iLCJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IlVzdWFyaW8gZGUgUHJ1ZWJhIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
    </div>
    
    <h2>📊 Payload Decodificado:</h2>
    <div class="code">
{
  "email": "usuario@ejemplo.com",
  "sub": "1234567890", 
  "name": "Usuario de Prueba",
  "iat": 1516239022
}
    </div>
    
    <h2>🎯 Lo que deberías ver en la consola:</h2>
    <ol>
        <li>🚀 Iniciando extracción de token...</li>
        <li>🔍 URL completa: http://localhost:5173/#access_token=...</li>
        <li>🔍 Fragment completo: #access_token=...</li>
        <li>🔍 Parámetros parseados: {access_token: "..."}</li>
        <li>✅ Token encontrado: eyJhbGciOiJIUzI1NiIs...</li>
        <li>🔍 Extrayendo email del JWT: eyJhbGciOiJIUzI1NiIs...</li>
        <li>✅ Email encontrado: usuario@ejemplo.com</li>
    </ol>
</body>
</html>
